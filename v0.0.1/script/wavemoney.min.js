!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.WaveJsSDK=t():e.WaveJsSDK=t()}(this,(function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return S}});class n{constructor(e){this.bridge=e}getCurrentPosition(){return new Promise(((e,t)=>this.bridge.dispatchBridgePayload({request:{handlerFunction:"_getCurrentPosition",handlerType:"function"}},e,t)))}}class r{constructor(e){this.bridge=e}getDeviceInformation(){return new Promise(((e,t)=>this.bridge.dispatchBridgePayload({request:{handlerFunction:"_getDeviceInformation",handlerType:"function"}},e,t)))}getContact(){return new Promise(((e,t)=>this.bridge.dispatchBridgePayload({request:{handlerFunction:"_getContact",handlerType:"function"}},e,t)))}}class i{constructor(e){this.bridge=e}openCamera(){return new Promise(((e,t)=>this.bridge.dispatchBridgePayload({request:{handlerFunction:"_openCamera",handlerType:"function"}},e,t)))}}class o{constructor(e){this.bridge=e}getUserInformation(){return new Promise(((e,t)=>this.bridge.dispatchBridgePayload({request:{handlerFunction:"_getUserInformation",handlerType:"function"}},e,t)))}getUserLoginStatus(){return new Promise(((e,t)=>this.bridge.dispatchBridgePayload({request:{handlerFunction:"_getUserLoginStatus",handlerType:"function"}},e,t)))}}let s=[];function a(e){const t=s.map((e=>e.id)).indexOf(e.id);-1!==t&&s.splice(t,1)}var d={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let u;const c=new Uint8Array(16);function l(){if(!u&&(u="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(c)}const h=[];for(let e=0;e<256;++e)h.push((e+256).toString(16).slice(1));var p=function(e,t,n){if(d.randomUUID&&!t&&!e)return d.randomUUID();const r=(e=e||{}).random||(e.rng||l)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase()}(r)};class g{constructor(e,t){this.config=t,this.channel=e}get isSupportAsync(){return this.channel.isSupportAsync()}dispatchBridgePayload(e,t,n){return r=this,null,i=function*(){const r=p();e.request.requestTransactionId=r,e.request.clientId=this.config.clientId;const i={id:r,onSuccess:t,onError:n};try{o=i,s.unshift(o),this.config.isDebug&&console.log(`[JS-SDK] Req Payload => ${JSON.stringify(e)}`);const t=yield this.channel.handle(e);if(this.isSupportAsync&&t)return this.handleResponse(r,t)}catch(e){return a(i),n({response:{error:{code:"WM-OTHER-001",message:`Unknown error ${JSON.stringify(e)}`}}})}var o},new Promise(((e,t)=>{var n=e=>{try{s(i.next(e))}catch(e){t(e)}},o=e=>{try{s(i.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);s((i=i.apply(r,null)).next())}));var r,i}handleResponse(e,t){var n;const r=s.filter((t=>t.id===e))[0];return this.config.isDebug&&console.log(`[JS-SDK] Response => ${JSON.stringify(t)}`),a(r),(null==(n=null==t?void 0:t.response)?void 0:n.data)?r.onSuccess(t):r.onError(t)}}class y{constructor(e){this.bridge=e}getPermissionList(){return new Promise(((e,t)=>this.bridge.dispatchBridgePayload({request:{handlerFunction:"_getPermissionList",handlerType:"function"}},e,t)))}getPermissionStatus(e){return new Promise(((t,n)=>this.bridge.dispatchBridgePayload({request:{handlerFunction:"_getPermissionStatus",handlerType:"function",data:{name:e}}},t,n)))}}class f{isSupportAsync(){return!0}handle(e){return window.flutter_inappwebview.callHandler("WaveJsSDK",JSON.stringify(e))}}class m{isSupportAsync(){return!1}handle(e){return window.WaveMoneyAndroid.postMessage(JSON.stringify(e))}}class w{isSupportAsync(){return!1}handle(e){return window.webkit.messageHandlers.WaveMoneyIOS.postMessage(JSON.stringify(e))}}class v{static createChannel(){if(void 0!==window.WaveMoneyAndroid)return new m;if(void 0!==window.flutter_inappwebview)return new f;if(void 0!==window.webkit&&void 0!==window.webkit.messageHandlers.WaveMoneyIOS)return new w;throw new Error("Unsupported platform")}}class b{constructor(e){this.bridge=e}makePayment(e,t,n){return new Promise(((r,i)=>this.bridge.dispatchBridgePayload({request:{handlerFunction:"_makePayment",handlerType:"function",data:{amount:e,receiverMsisdn:t,orderID:n}}},r,i)))}}class P{constructor(e){this.debounceTimeout=null,this.bridge=e}exit(){return new Promise(((e,t)=>{this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((()=>{return n=this,null,r=function*(){yield this.bridge.dispatchBridgePayload({request:{handlerFunction:"_exit",handlerType:"function"}},e,t),this.debounceTimeout=null},new Promise(((e,t)=>{var i=e=>{try{s(r.next(e))}catch(e){t(e)}},o=e=>{try{s(r.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,o);s((r=r.apply(n,null)).next())}));var n,r}),300)}))}}class S{init(e){const t=v.createChannel(),s=new g(t,e);this.permissionModule=new y(s),this.locationModule=new n(s),this.deviceModule=new r(s),this.mediaModule=new i(s),this.userModule=new o(s),this.paymentModule=new b(s),this.viewModule=new P(s);const a={handleResponse:(e,t)=>s.handleResponse(e,t),permissionModule:this.permissionModule,locationModule:this.locationModule,deviceModule:this.deviceModule,mediaModule:this.mediaModule,userModule:this.userModule,paymentModule:this.paymentModule,viewModule:this.viewModule};return window.WaveJsSDK=a,a}}return t.default}()}));
//# sourceMappingURL=wavemoney.min.js.map